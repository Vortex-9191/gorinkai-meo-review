# MEO口コミツール

医療機関向けのレビュー収集ツールです。ユーザーから段階的に感想を収集し、5つ星評価の場合はDify AIを使用して洗練された口コミテキストを自動生成します。

## 機能

- 📝 12ステップの段階的アンケートフォーム（星評価 + 11個の質問）
- ⭐ 星評価システム
- 🤖 Dify AI統合による口コミテキスト自動生成（5つ星のみ）
- 📱 レスポンシブデザイン
- 🎨 医療機関向けの落ち着いたデザイン
- 🔗 Googleマップレビューへの誘導
- ✍️ 自由記述形式の質問（より詳細なフィードバック収集）

## セットアップ

### 1. 環境変数の設定

`.env.local`ファイルを作成し、以下の環境変数を設定してください：

\`\`\`bash
# Dify API設定
DIFY_API_ENDPOINT=https://api.dify.ai/v1/workflows/run
DIFY_API_KEY=your_dify_api_key_here

# Googleレビュー URL
NEXT_PUBLIC_GOOGLE_REVIEW_URL=https://g.page/r/YOUR_PLACE_ID/review
\`\`\`

### 2. Dify APIの設定

1. [Dify](https://dify.ai/)でアカウントを作成
2. 新しいアプリケーションを作成
3. 以下の入力変数を設定：
   - `rating`: 評価（1-5）
   - `q1`: 来院のきっかけや当院を知った経緯
   - `q2`: 利用期間や回数
   - `q3`: どのような症状で来院
   - `q4`: 診療の感想や診療後の経過
   - `q5`: 担当医やスタッフの対応
   - `q6`: 院内の環境や設備
   - `q7`: 予約システムや待ち時間
   - `q8`: アクセスや駐車場
   - `q9`: 治療費やお支払い
   - `q10`: メッセージやコメント
   - `q11`: 改善要望
4. プロンプトを設定して口コミテキストを生成
5. APIキーを取得して環境変数に設定

### 3. Googleマップレビュー URLの取得

1. Google マイビジネスにログイン
2. あなたのビジネスを選択
3. レビューURLを取得して環境変数に設定

## 開発

\`\`\`bash
npm install
npm run dev
\`\`\`

ブラウザで [http://localhost:3000](http://localhost:3000) を開いてください。

## 動作フロー

1. ユーザーが星評価を選択
2. 11個の質問に自由記述形式で回答
3. 送信ボタンをクリック
4. **5つ星の場合**: Dify APIが口コミテキストを生成し、Googleマップへの投稿を促す
5. **4つ星以下の場合**: 感謝メッセージを表示（口コミテキストは生成しない）

## カスタマイズ

### 質問内容の変更

`components/step-container.tsx`で各ステップの質問とプレースホルダーテキストを編集できます。

### デザインの変更

`app/globals.css`でカラーテーマを変更できます。

### Difyプロンプトの調整

Difyのダッシュボードでプロンプトを調整し、生成される口コミテキストのトーンやスタイルをカスタマイズできます。

## 技術スタック

- Next.js 15
- React 19
- TypeScript
- Tailwind CSS v4
- shadcn/ui
- Dify AI API

## ライセンス

MIT
